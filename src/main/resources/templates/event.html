<!DOCTYPE html>
<html lang="it">

<head th:replace="~{fragments/header :: header(title='SiwEventi - Evento')}">
</head>

<body>
    <div th:replace="~{fragments/navbar :: navbar}"></div>
    <div class="container mb-5 w-75">
        <h1 class="card-title mt-5 mb-5 text-center" th:text="${event.name}">Nome dell'evento</h1>
        <div class="container form-container shadow-sm">
            <div class="row g-0">

                <!-- Colonna per l'immagine dell'evento -->
                <div class="col-md-5 text-center mt-3">
                    <img th:src="${event.urlImage}" class="img-lg rounded" alt="Immagine Evento">
                </div>

                <!-- Colonna per le informazioni dell'evento -->
                <div class="d-flex flex-column col-md-7 align-items-center ">
                    <div class="card-body text-center">
                        <!-- Paragrafo con il link al locale -->
                        <p class="lead">Locale:
                            <a th:href="@{'/local/' + ${event.local.id}}" th:text="${event.local.name}"></a>
                        </p>
                        <p class="lead" th:text="'Il nostro evento a tema: ' + ${event.theme}">Tema: Musica e Danza</p>
                        <p class="lead" th:text="'Numero massimo di partecipanti: ' + ${event.nMaxParticipants}">Numero massimo di partecipanti: 200</p>
                        <p class="lead" th:text="'Data e orario di inizio: ' + ${#temporals.format(event.startDateTime, 'HH:mm d MMMM yyyy')}">
                            Data inizio: 2023-06-20 21:00</p>
                        <p class="lead" th:text="'Data e orario di fine: ' + ${#temporals.format(event.endDateTime, 'HH:mm d MMMM yyyy')}">
                            Data fine: 2023-06-21 02:00</p>
                        <p class="lead" th:text="'Costo: ' + ${event.cost} + '€'">Costo: €50</p>
                    </div>

                    <div class="d-flex justify-content-center">
                        <div th:if="${CurrentUser != null}">
                            <!-- Form Prenotazione -->
                            <div th:if="${isReserved}">
                                <div class="alert alert-success" role="alert">
                                    Sei già prenotato!
                                    <a href="/reservations" class="text-success">Vai alle tue prenotazioni</a>.
                                </div>
                            </div>
                            <div th:if="${!isReserved}">
                                <form th:action="@{/addReservation}" method="post">
                                    <input type="hidden" th:name="eventId" th:value="${event.id}" />
                                    <input type="hidden" id="userId" name="userId" th:value="${CurrentUser.id}" />
                                    <button type="submit" class="btn btn-primary px-5">Prenota</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div th:if="${CurrentUser == null}">
                        <div class="alert alert-info text-center px-4 col-12" role="alert">
                            <p class="m-0"><a href="/login" class="alert-link">Accedi</a> o <a href="/register" class="alert-link">Registrati</a> per Prenotarti all'Evento!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div th:replace="~{fragments/footer :: footer}"></div>
</body>

</html>